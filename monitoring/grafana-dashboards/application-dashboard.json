{
  "dashboard": {
    "title": "Zero-Trust Application Dashboard",
    "tags": ["zero-trust", "application"],
    "timezone": "browser",
    "panels": [
      {
        "title": "Request Rate",
        "targets": [
          {
            "expr": "sum(rate(app_request_count[5m])) by (endpoint)",
            "legendFormat": "{{ endpoint }}"
          }
        ],
        "type": "graph"
      },
      {
        "title": "Error Rate",
        "targets": [
          {
            "expr": "sum(rate(app_request_count{http_status=~\"5..\"}[5m])) / sum(rate(app_request_count[5m]))",
            "legendFormat": "Error Rate"
          }
        ],
        "type": "graph"
      },
      {
        "title": "Response Time (p95)",
        "targets": [
          {
            "expr": "histogram_quantile(0.95, sum(rate(app_request_latency_seconds_bucket[5m])) by (le, endpoint))",
            "legendFormat": "{{ endpoint }}"
          }
        ],
        "type": "graph"
      },
      {
        "title": "Active Requests",
        "targets": [
          {
            "expr": "app_active_requests",
            "legendFormat": "Active Requests"
          }
        ],
        "type": "graph"
      },
      {
        "title": "CPU Usage",
        "targets": [
          {
            "expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"zero-trust\", pod=~\"zero-trust-app.*\"}[5m])) by (pod)",
            "legendFormat": "{{ pod }}"
          }
        ],
        "type": "graph"
      },
      {
        "title": "Memory Usage",
        "targets": [
          {
            "expr": "sum(container_memory_usage_bytes{namespace=\"zero-trust\", pod=~\"zero-trust-app.*\"}) by (pod)",
            "legendFormat": "{{ pod }}"
          }
        ],
        "type": "graph"
      },
      {
        "title": "Pod Status",
        "targets": [
          {
            "expr": "kube_pod_status_phase{namespace=\"zero-trust\", pod=~\"zero-trust-app.*\"}",
            "legendFormat": "{{ pod }} - {{ phase }}"
          }
        ],
        "type": "stat"
      },
      {
        "title": "HTTP Status Codes",
        "targets": [
          {
            "expr": "sum(rate(app_request_count[5m])) by (http_status)",
            "legendFormat": "{{ http_status }}"
          }
        ],
        "type": "piechart"
      }
    ],
    "time": {
      "from": "now-1h",
      "to": "now"
    },
    "refresh": "30s"
  }
}
